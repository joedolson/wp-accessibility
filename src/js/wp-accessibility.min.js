(()=>{(()=>{"use strict";let m=document.querySelector("html"),A=document.querySelector("body"),h=[];if(wpa.lang&&(m.getAttribute("lang")||(m.setAttribute("lang",wpa.lang),(wpa.errors||wpa.tracking)&&(h.push("html-lang"),console.log("HTML language set by WP Accessibility")))),wpa.dir&&!m.getAttribute("dir")&&wpa.dir!=="ltr"&&(m.setAttributeattr("dir",wpa.dir),(wpa.errors||wpa.tracking)&&(h.push("html-lang-direction"),console.log("HTML language direction set by WP Accessibility"))),wpa.continue){let c=document.querySelectorAll(".wp-block-post-excerpt__more-link");c.length!==0&&c.forEach(a=>{if(!a.hasAttribute("aria-describedby")){let d=a.closest(".wp-block-post"),f=d.getAttribute("class");f=f.replaceAll(" ","-");let i=d.querySelector(".wp-block-post-title");i&&(i.hasAttribute("id")?f=i.getAttribute("id"):i.setAttribute("id",f),a.setAttribute("aria-describedby",f),(wpa.errors||wpa.tracking)&&console.log("Continue Reading link description set by WP Accessibility"))}})}let y=document.querySelector('meta[name="viewport"]');if(y){let c=y.getAttribute("content"),a=y.getAttribute("content");c.search(/user-scalable=no/g)&&(a=c.replace("user-scalable=no","user-scalable=yes"),y.setAttribute("content",a),(wpa.errors||wpa.tracking)&&a!=c&&(h.push("viewport-scalable"),console.log("Viewport made scalable by WP Accessibility"))),c.search(/maximum-scale=1/g)&&(a=c.replace("maximum-scale=1","maximum-scale=5"),a=a.replace("maximum-scale=0","maximum-scale=5"),y.setAttribute("content",a),(wpa.errors||wpa.tracking)&&a!=c&&(h.push("viewport-maxscale"),console.log("Viewport maximum scale set by WP Accessibility")))}if(wpa.skiplinks.enabled&&(A.insertAdjacentHTML("afterbegin",wpa.skiplinks.output),(wpa.errors||wpa.tracking)&&(h.push("skiplinks"),console.log("Skip links added by WP Accessibility"))),wpa.current){let c=document.querySelectorAll(".current-menu-item a, .current_page_item a");c.length!==0&&(c.forEach(a=>{a.setAttribute("aria-current","page")}),(wpa.errors||wpa.tracking)&&(h.push("aria-current"),console.log("ARIA current added by WP Accessibility")))}if(wpa.labels&&["s","author","email","url","comment"].forEach(a=>{let d,f,i,t,e,o,n,r,l,s;a=="comment"?d=document.querySelectorAll("textarea[name="+a+"]"):d=document.querySelectorAll("input[name="+a+"]:not(#adminbar-search)"),d.length!==0&&d.forEach(b=>{b.length!==0&&(f=b.getAttribute("id"),i=b.closest("label"),t=b.getAttribute("aria-label"),e=b.getAttribute("aria-labelledby"),o={},e&&(o=document.getElementById(e)),n=!(t==null||t==""||typeof t>"u"),r=!(e==null||e==""||typeof e>"u"),(!n&&!r||!n&&r&&!o)&&(f?(l=document.querySelector("label[for="+f+"]"),l&&(s=l.innerText,l&&!s&&(l.innerText=wpa.wpalabels[a],(wpa.errors||wpa.tracking)&&(h.push(["empty-label",wpa.wpalabels[a]]),console.log("Empty label on "+wpa.wpalabels[a]+" added by WP Accessibility")))),!l&&!i&&(b.insertAdjacentHTML("beforebegin","<label for='"+f+"' class='wpa-screen-reader-text'>"+wpa.wpalabels[a]+"</label>"),(wpa.errors||wpa.tracking)&&(h.push(["explicit-label",wpa.wpalabels[a]]),console.log("Explicit label on "+wpa.wpalabels[a]+" added by WP Accessibility")))):i||(b.setAttribute("id","wpa_label_"+a),b.insertAdjacentHTML("beforebegin","<label for='wpa_label_"+a+"' class='wpa-screen-reader-text'>"+wpa.wpalabels[a]+"</label>"),(wpa.errors||wpa.tracking)&&(h.push(["implicit-label",wpa.wpalabels[a]]),console.log("Implicit label on "+wpa.wpalabels[a]+" added by WP Accessibility")))))})}),wpa.titles){let c=0,a=0,d=0,f=!1,i=document.querySelectorAll("img, a, input, textarea, select, button");i.length!==0&&(i.forEach(t=>{let e=t.getAttribute("title");if(t.classList.contains("nturl")&&(f=!0),e&&e!=="")switch(t.tagName){case"IMG":let o=t.getAttribute("alt");e=t.getAttribute("title"),!o||o===""?(t.setAttribute("alt",e),t.removeAttribute("title")):e===o&&t.removeAttribute("title"),c++;break;case"A":case"BUTTON":let n=x(t);if(!n||n===""){let L=t.getAttribute("aria-label");(!L||L==="")&&(t.setAttribute("aria-label",e),f||t.removeAttribute("title"))}else t.removeAttribute("title");a++;break;case"INPUT":case"SELECT":case"TEXTAREA":let r=t.getAttribute("aria-label"),l=t.getAttribute("aria-labelledby"),s=l?document.getElementById(l):!1,b=t.getAttribute("id"),g=b?document.querySelector('label[for="'+b+'"]'):!1,p=t.closest("label"),u=!!(r&&r!==""),w=!!(g&&x(g)!==""),k=!!(p&&x(p)!==""),E=!!(s&&x(s)!=="");u||w||k||E||t.setAttribute("aria-label",e),t.removeAttribute("title"),d++;break}}),(wpa.errors||wpa.tracking)&&(c>0&&(h.push(["images-titles",c]),console.log(c+" title attributes removed from images by WP Accessibility")),a>0&&(h.push(["control-titles",a]),console.log(a+" title attributes removed from links and buttons by WP Accessibility")),d>0&&(h.push(["input-titles",d]),console.log(d+" title attributes removed from input fields by WP Accessibility"))))}if(wpa.target){let c=document.querySelectorAll("a:not(.wpa-allow-target)"),a=0;c.length!==0&&(c.forEach(d=>{let f=d.getAttribute("target"),i=d.getAttribute("href");if(f)if(i.startsWith("#"))d.removeAttribute("target");else try{new URL(i).hostname.includes("facebook")||(d.removeAttr("target"),a++)}catch(t){}}),a>0&&(wpa.errors||wpa.tracking)&&(h.push(["link-targets",a]),console.log(a+" target attributes removed from links by WP Accessibility")))}if(wpa.tabindex){let c=document.querySelectorAll("input,a[href],select,textarea,button"),a=0;c.length!==0&&(c.forEach(e=>{e.getAttribute("tabindex")&&(e.removeAttribute("tabindex"),a++)}),a>0&&(wpa.errors||wpa.tracking)&&(h.push(["control-tabindex",a]),console.log(a+" tabindex attributes removed from links, buttons and inputs by WP Accessibility")));let d=document.querySelectorAll('[role="button"]:not([tabindex]):not(a):not(button)'),f=document.querySelectorAll('a[role="button"]:not([tabindex]):not([href])'),i=document.querySelectorAll('[role="link"]:not([tabindex]):not(a)'),t=document.querySelectorAll("a:not([href]):not([tabindex])");d.length!==0&&(d.forEach(e=>{e.setAttribute("tabindex","0"),e.classList.add("wpa-focusable")}),d.length>0&&(wpa.errors||wpa.tracking)&&(h.push(["button-add-tabindex",d.length]),console.log(d.length+" tabindex attributes added to divs with the button role by WP Accessibility"))),f!==0&&(f.forEach(e=>{e.setAttribute("tabindex","0"),e.classList.add("wpa-focusable")}),f.length>0&&(wpa.errors||wpa.tracking)&&(h.push(["link-add-tabindex",f.length]),console.log(f.length+" tabindex attributes added to anchor elements with the button role and no href value by WP Accessibility"))),i!==0&&(i.forEach(e=>{e.setAttribute("tabindex","0"),e.classList.add("wpa-focusable")}),i.length>0&&(wpa.errors||wpa.tracking)&&(h.push(["fakelink-add-tabindex",i.length]),console.log(f.length+" tabindex attributes added to elements with the link role not using the a element by WP Accessibility"))),t!==0&&(t.forEach(e=>{e.setAttribute("tabindex","0"),e.classList.add("wpa-focusable")}),t.length>0&&(wpa.errors||wpa.tracking)&&(h.push(["links-add-tabindex",t.length]),console.log(f.length+" tabindex attributes added to a with no href attribute by WP Accessibility")))}if(wpa.url!=="disabled"){let d=function(e,o,n="event"){let r=new FormData;r.append("action",wpa.action),r.append("security",wpa.security),r.append("stats",e),r.append("post_id",wpa.post_id),r.append("title",o),r.append("type",n),fetch(wpa.ajaxurl,{method:"POST",body:r})};class c{constructor(o){var n=Array.prototype.forEach,r=Array.prototype.map;this.each=function(l,s,b){if(l!=null){if(n&&l.forEach===n)l.forEach(s,b);else if(l.length===+l.length){for(var g=0,p=l.length;g<p;g++)if(JSON.stringify(s.call(b,l[g],g,l))==="{}")return}else for(var u in l)if(l.hasOwnProperty(u)&&JSON.stringify(s.call(b,l[u],u,l))==="{}")return}},this.map=function(l,s,b){var g=[];return l==null?g:r&&l.map===r?l.map(s,b):(this.each(l,function(p,u,w){g[g.length]=s.call(b,p,u,w)}),g)},o&&(this.hasher=o)}get(){keys=[],keys.push(navigator.userAgent),keys.push([screen.height,screen.width,screen.colorDepth].join("x")),keys.push(new Date().getTimezoneOffset()),keys.push(!!window.sessionStorage),keys.push(!!window.localStorage);var o=this.map(navigator.plugins,function(n){var r=this.map(n,function(l){return[l.type,l.suffixes].join("~")}).join(",");return[n.name,n.description,r].join("::")},this).join(";");return keys.push(o),this.hasher?this.hasher(keys.join("###"),31):this.murmurhash3_32_gc(keys.join("###"),31)}murmurhash3_32_gc(o,n){let r,l,s,b,g,p,u,w;for(r=o.length&3,l=o.length-r,s=n,g=3432918353,p=461845907,w=0;w<l;)u=o.charCodeAt(w)&255|(o.charCodeAt(++w)&255)<<8|(o.charCodeAt(++w)&255)<<16|(o.charCodeAt(++w)&255)<<24,++w,u=(u&65535)*g+(((u>>>16)*g&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(u&65535)*p+(((u>>>16)*p&65535)<<16)&4294967295,s^=u,s=s<<13|s>>>19,b=(s&65535)*5+(((s>>>16)*5&65535)<<16)&4294967295,s=(b&65535)+27492+(((b>>>16)+58964&65535)<<16);switch(u=0,r){case 3:u^=(o.charCodeAt(w+2)&255)<<16;case 2:u^=(o.charCodeAt(w+1)&255)<<8;case 1:u^=o.charCodeAt(w)&255,u=(u&65535)*g+(((u>>>16)*g&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(u&65535)*p+(((u>>>16)*p&65535)<<16)&4294967295,s^=u}return s^=o.length,s^=s>>>16,s=(s&65535)*2246822507+(((s>>>16)*2246822507&65535)<<16)&4294967295,s^=s>>>13,s=(s&65535)*3266489909+(((s>>>16)*3266489909&65535)<<16)&4294967295,s^=s>>>16,s>>>0}}let a=new c().get(),f=document.querySelector(".toggle-contrast");f&&f.addEventListener("click",function(){let e;this.getAttribute("id")=="is_normal_contrast"?e={contrast:"disabled"}:e={contrast:"enabled"},d(e,a)});let i=document.querySelector(".toggle-contrast");i&&i.addEventListener("click",function(){let e;this.getAttribute("id")=="is_normal_fontsize"?e={fontsize:"disabled"}:e={fontsize:"enabled"},d(e,a)}),v(".wpa-ld button").then(e=>{e.addEventListener("click",function(o){if(e.getAttribute("aria-expanded")==="true"){let s={longdesc:e.closest("div").getAttribute("class").replace("wpa-ld wp-image-","")};d(s,a)}})});let t=document.querySelectorAll(".wpa-alt button");t.length>0&&t.forEach(e=>{e.addEventListener("click",function(o){if(e.getAttribute("aria-expanded")==="true"){let s={alttext:e.closest("div").getAttribute("class").replace("wpa-alt wp-image-","")};d(s,a)}})}),wpa.tracking&&h.length>=1&&d(h,wpa.url,"view")}if(wpa.underline.enabled){let c=document.querySelectorAll(wpa.underline.target+":not(nav "+wpa.underline.target+"):not(#wpadminbar a), .wpa-focusable[role=link]");c.length>0&&c.forEach(a=>{let d=a.style.outlineWidth,f=a.style.outlineOffset,i=a.style.color,t=a.style.outlineColor;a.style.textDecoration="underline",a.addEventListener("mouseenter",function(){this.style.textDecoration="none"}),a.addEventListener("mouseleave",function(){this.style.textDecoration="underline"}),a.addEventListener("focusin",function(){let e="2px";d=="2px"&&(e="4px"),this.style.outlineWidth=e,this.style.outlineColor=i,this.style.outlineOffset="2px"}),a.addEventListener("focusout",function(){this.style.outlineWidth=d,this.style.outlineColor=t,this.style.outlineOffset=f})})}if(wpa.videos){let c=matchMedia("(prefers-reduced-motion)"),a="false",d=document.querySelectorAll("video[autoplay]:not([controls])");d.length>0&&d.forEach(f=>{c.matches&&(f.pause(),a="true");let i=f.parentElement,t=document.createElement("button"),e=document.createElement("span"),o=document.createElement("span");t.setAttribute("type","button"),t.classList.add("wpa-video"),t.setAttribute("aria-pressed",a),e.classList.add("dashicons-controls-pause","dashicons"),e.setAttribute("aria-hidden","true"),o.classList.add("screen-reader-text"),o.innerText=wpa.pause,t.append(e,o),i.append(t),t.addEventListener("click",function(){let n=this.getAttribute("aria-pressed");console.log(n),n==="true"?(f.play(),this.setAttribute("aria-pressed","false")):(f.pause(),this.setAttribute("aria-pressed","true"))})})}if(wpa.alt){let c=wpa.altSelector?wpa.altSelector:'.hentry img[alt]:not([alt=""]), .comment-content img[alt]:not([alt=""]), #content img[alt]:not([alt=""]),.entry-content img[alt]:not([alt=""])',a=document.querySelectorAll(c),d=(f,i)=>{f.parentElement.insertBefore(i,f),i.appendChild(f)};a.forEach(f=>{let i=f,t=i.closest("a"),e=i.closest("button"),o=!!t,n=!!e,r=i.width,l=i.height;if((r||l)&&(r=r||56,l=l||56,l*r<150*300))return;let s=i.getAttribute("alt"),b=[...i.classList];i.setAttribute("class","");let g=document.createElement("div");g.classList.add("wpa-alt"),d(o||n?o?t:e:i,g),b.forEach(w=>{g.classList.add(w)}),g.insertAdjacentHTML("afterbegin",'<button aria-expanded="false" type="button" class="wpa-toggle">alt</button>'),g.insertAdjacentHTML("beforeend",'<div class="wpa-alt-text"></div>');let p=g.querySelector(".wpa-alt-text");p.style.display="none",p.innerText=s,g.querySelector("button").addEventListener("click",function(w){p.checkVisibility()?(this.setAttribute("aria-expanded","false"),p.style.display="none"):(this.setAttribute("aria-expanded","true"),p.style.display="block")})})}if(wpa.ldType){let d=function(i){let t=i.getAttribute("class");(t===null||t==="")&&(parent=i.closest(".wpa-alt"),t=parent.getAttribute("class").replace("wpa-alt ",""));let e=t.replace("wp-image-",""),o=wpa.restUrl+"/"+e;fetch(o).then(n=>n.json()).then(n=>{let r=n.description.rendered;if(r=r.replace(/(<([^>]+)>)/gi,"").trim(),r!==""){let l=new URL(wpa.ldHome);l.searchParams.set("longdesc",e),l.searchParams.set("p",e),l.toString(),f(i,e,l,r)}}).catch(n=>{console.log(n)})},f=function(i,t,e,o){let n=document.createElement("div");n.classList.add("wpa-ld");let r=i.getAttribute("alt");r===""&&(r="<code>"+i.getAttribute("src").replace(wpa.ldHome,"")+"</code>");let l=document.body.className.split(/\s+/),s="";l.forEach(p=>{p.match(/postid-/gi)&&(s=p.replace("postid-","",p)),p.match(/page-id-/gi)&&(s=p.replace("page-id-","",p))});let b=new URL(e);if(b.searchParams.set("referrer",s),b.toString(),[...i.classList].forEach(p=>{n.classList.add(p)}),c(i,n),i.setAttribute("alt",""),i.setAttribute("class",""),wpa.ldType==="link")n.insertAdjacentHTML("beforeend",'<a href="'+b+'" class="longdesc-link">Description<span class="screen-reader-text"> of '+r+"</span></a>");else{n.insertAdjacentHTML("beforeend",'<button aria-expanded="false" class="wpa-toggle">'+wpa.ldText+"</button>"),n.insertAdjacentHTML("beforeend",'<div class="longdesc"></div>');let p=n.querySelector(".longdesc");p.style.display="none",fetch(e).then(u=>{if(u.ok)return u.text();p.insertAdjacentHTML("beforeend",o)}).then(u=>{let k=new DOMParser().parseFromString(u,"text/html");p.insertAdjacentElement("beforeend",k.querySelector("#desc_"+t))}),n.querySelector("button").addEventListener("click",function(u){p.checkVisibility()?(this.setAttribute("aria-expanded","false"),p.style.display="none"):(this.setAttribute("aria-expanded","true"),p.style.display="block")})}},c=(i,t)=>{i.parentElement.insertBefore(t,i),t.appendChild(i)},a=document.querySelectorAll("img[longdesc]");if(wpa.ldType==="link"){a.length>0&&a.forEach(t=>{let e=document.createElement("div");e.classList.add("wpa-ld");let o=t.getAttribute("longdesc"),n=t.getAttribute("alt"),r=[...img.classList];c(t,e),r.forEach(s=>{e.classList.add(s)}),t.setAttribute("class","");let l=document.createElement("a");l.setAttribute("href",o),l.classList.add("longdesc-link"),l.innerHTML='Description<span class="screen-reader-text"> of'+n+"</span>",t.insertAdjacentElement("afterend",l)});let i=document.querySelectorAll("figure.is-style-longdesc");i.length>0&&i.forEach(t=>{let e=t.querySelector("img");d(e)})}else{a.length>0&&a.forEach(t=>{c(t,wrapper);let e=t.getAttribute("longdesc"),o=t.getAttribute("class").match(/\S+/g),n="";o.forEach(l=>{l.match(/wp-image-/gi)&&(n=l),wrapper.classList.add(l)}),n===""&&(n=t.getAttribute("id").replace("longdesc-return-","")),t.setAttribute("class",""),wrapper.insertAdjacentHTML("beforeend",'<button aria-expanded="false" type="button" class="wpa-toggle">'+wpa.ldText+"</button>"),wrapper.insertAdjacentHTML('<div class="longdesc"></div>');let r=wrapper.querySelector(".longdesc");r.style.display="none",r.load(e+" #desc_"+n),wrapper.querySelector("button").addEventListener("click",function(){r.checkVisibility()?(this.setAttribute("aria-expanded","false"),r.style.display="none"):(this.setAttribute("aria-expanded","true"),r.style.display="block")})});let i=document.querySelectorAll("figure.is-style-longdesc");i.length>0&&i.forEach(t=>{let e=t.querySelector("img");d(e)})}}})();function x(m){let A="";if(m.nodeType===3||m.nodeType===4)A=m.nodeValue;else if(m.nodeType===1&&(m.tagName.toLowerCase()=="img"||m.tagName.toLowerCase()=="area"||m.tagName.toLowerCase()=="input"&&m.getAttribute("type")&&m.getAttribute("type").toLowerCase()=="image"))A=m.getAttribute("alt")||"";else if(m.nodeType===1&&!m.tagName.match(/^(script|style)$/i)){let h=m.childNodes;for(let y=0,c=h.length;y<c;y++){let a=m.getAttribute("aria-label");A+=a||x(h[y])+" "}}return A}function v(m){return new Promise(A=>{if(document.querySelector(m))return A(document.querySelector(m));let h=new MutationObserver(y=>{document.querySelector(m)&&(h.disconnect(),A(document.querySelector(m)))});h.observe(document.body,{childList:!0,subtree:!0})})}})();

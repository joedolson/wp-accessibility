(()=>{(function(t){"use strict";var p=document.querySelector("html"),i=[];if(wpa.lang){var f=p.getAttribute("lang");f||(t("html").attr("lang",wpa.lang),(wpa.errors||wpa.tracking)&&(i.push("html-lang"),console.log("HTML language set by WP Accessibility")))}if(wpa.dir){var S=p.getAttribute("dir");!S&&wpa.dir!=="ltr"&&(t("html").attr("dir",wpa.dir),(wpa.errors||wpa.tracking)&&(i.push("html-lang-direction"),console.log("HTML language direction set by WP Accessibility")))}if(wpa.continue){let s=document.querySelectorAll(".wp-block-post-excerpt__more-link");s&&s.forEach(a=>{if(!a.hasAttribute("aria-describedby")){let e=a.closest(".wp-block-post"),r=e.getAttribute("class");r=r.replaceAll(" ","-");let o=e.querySelector(".wp-block-post-title");o&&(o.hasAttribute("id")?r=o.getAttribute("id"):o.setAttribute("id",r),a.setAttribute("aria-describedby",r),(wpa.errors||wpa.tracking)&&console.log("Continue Reading link description set by WP Accessibility"))}})}var u=document.querySelector('meta[name="viewport"]');if(u){var g=u.getAttribute("content"),b=u.getAttribute("content");g.search(/user-scalable=no/g)&&(b=g.replace("user-scalable=no","user-scalable=yes"),u.setAttribute("content",b),(wpa.errors||wpa.tracking)&&b!=g&&(i.push("viewport-scalable"),console.log("Viewport made scalable by WP Accessibility"))),g.search(/maximum-scale=1/g)&&(b=g.replace("maximum-scale=1","maximum-scale=5"),b=b.replace("maximum-scale=0","maximum-scale=5"),u.setAttribute("content",b),(wpa.errors||wpa.tracking)&&b!=g&&(i.push("viewport-maxscale"),console.log("Viewport maximum scale set by WP Accessibility")))}if(wpa.skiplinks.enabled&&(t("body").prepend(wpa.skiplinks.output),(wpa.errors||wpa.tracking)&&(i.push("skiplinks"),console.log("Skip links added by WP Accessibility"))),wpa.current&&(t(function(){t(".current-menu-item a, .current_page_item a").attr("aria-current","page")}),(wpa.errors||wpa.tracking)&&(i.push("aria-current"),console.log("ARIA current added by WP Accessibility"))),wpa.labels){var j=["s","author","email","url","comment"];t.each(j,function(s,a){if(a=="comment")var e=t("textarea[name="+a+"]");else var e=t("input[name="+a+"]").not("#adminbar-search");if(e.length!==0){var r=e.attr("id"),o=t(e).parent("label"),l=t(e).attr("aria-label"),n=t(e).attr("aria-labelledby"),c={};n&&(c=t("#"+n));var d=!(l==""||typeof l>"u"),m=!(n==""||typeof n>"u");if(!d&&!m||!d&&m&&c.length===0)if(r){var w=t("label[for="+r+"]"),W=w.text();w.length&&!W&&(w.text(wpa.wpalabels[a]),(wpa.errors||wpa.tracking)&&(i.push(["empty-label",wpa.wpalabels[a]]),console.log("Empty label on "+wpa.wpalabels[a]+" added by WP Accessibility"))),!w.length&&!o.length&&(e.before("<label for='"+r+"' class='wpa-screen-reader-text'>"+wpa.wpalabels[a]+"</label>"),(wpa.errors||wpa.tracking)&&(i.push(["explicit-label",wpa.wpalabels[a]]),console.log("Explicit label on "+wpa.wpalabels[a]+" added by WP Accessibility")))}else o.length||(e.attr("id","wpa_label_"+a).before("<label for='wpa_label_"+a+"' class='wpa-screen-reader-text'>"+wpa.wpalabels[a]+"</label>"),(wpa.errors||wpa.tracking)&&(i.push(["implicit-label",wpa.wpalabels[a]]),console.log("Implicit label on "+wpa.wpalabels[a]+" added by WP Accessibility")))}})}if(wpa.titles){var h=0,y=0,A=0;let s=!1;document.querySelectorAll("img, a, input, textarea, select, button").forEach(e=>{var r=e.getAttribute("title");if(e.classList.contains("nturl")&&(s=!0),r&&r!=="")switch(e.tagName){case"IMG":var o=e.getAttribute("alt");(!o||o==="")&&e.setAttribute("alt",r),e.removeAttribute("title"),h++;break;case"A":case"BUTTON":var l=v(e);if(!l||l===""){var n=e.getAttribute("aria-label");(!n||n==="")&&(e.setAttribute("aria-label",r),s||e.removeAttribute("title"))}else e.removeAttribute("title");y++;break;case"INPUT":case"SELECT":case"TEXTAREA":var n=e.getAttribute("aria-label"),c=e.getAttribute("aria-labelledby"),d=c?document.getElementById(c):!1,m=e.getAttribute("id"),w=m?document.querySelector('label[for="'+m+'"]'):!1,W=e.closest("label"),V=!!(n&&n!==""),U=!!(w&&v(w)!==""),F=!!(W&&v(W)!==""),H=!!(d&&v(arialabeller)!=="");V||U||F||H||e.setAttribute("aria-label",r),e.removeAttribute("title"),A++;break}}),(wpa.errors||wpa.tracking)&&(h>0&&(i.push(["images-titles",h]),console.log(h+" title attributes removed from images by WP Accessibility")),y>0&&(i.push(["control-titles",y]),console.log(y+" title attributes removed from links and buttons by WP Accessibility")),A>0&&(i.push(["input-titles",A]),console.log(A+" title attributes removed from input fields by WP Accessibility")))}if(wpa.target){var q=t("a:not(.wpa-allow-target)"),x=0;q.each(function(){var s=t(this).attr("target"),a=t(this).attr("href");if(s)try{var e=new URL(a),r=e.hostname;r.includes("facebook")||(t(this).removeAttr("target"),x++)}catch(o){}}),x>0&&(wpa.errors||wpa.tracking)&&(i.push(["link-targets",x]),console.log(x+" target attributes removed from links by WP Accessibility"))}if(wpa.tabindex){var C=t("input,a,select,textarea,button").not("a:not([href])"),k=0;C.each(function(){var s=t(this).attr("tabindex");s&&(t(this).removeAttr("tabindex"),k++)}),k>0&&(wpa.errors||wpa.tracking)&&(i.push(["control-tabindex",k]),console.log(k+" tabindex attributes removed from links, buttons and inputs by WP Accessibility"));var _=t('div[role="button"]').not("div[tabindex]"),P=t('a[role="button"]').not("a[tabindex],a[href]");_.attr("tabindex","0").addClass("wpa-focusable"),_.length>0&&(wpa.errors||wpa.tracking)&&(i.push(["button-add-tabindex",_.length]),console.log(_.length+" tabindex attributes added to divs with the button role by WP Accessibility")),P.attr("tabindex","0").addClass("wpa-focusable"),P.length>0&&(wpa.errors||wpa.tracking)&&(i.push(["link-add-tabindex",P.length]),console.log(P.length+" tabindex attributes added to anchor elements with the button role and no href value by WP Accessibility"))}var E=new Fingerprint().get();if(wpa.url!=="disabled"&&(t(".toggle-contrast").on("click",function(s){if(t(this).attr("id")=="is_normal_contrast")var a={contrast:"disabled"};else var a={contrast:"enabled"};var e={action:wpa.action,security:wpa.security,stats:a,post_id:wpa.post_id,title:E,type:"event"};t.post(wpa.ajaxurl,e,function(){},"json")}),t(".toggle-fontsize").on("click",function(s){if(t(this).attr("id")=="is_normal_fontsize")var a={fontsize:"disabled"};else var a={fontsize:"enabled"};var e={action:wpa.action,security:wpa.security,stats:a,post_id:wpa.post_id,title:E,type:"event"};t.post(wpa.ajaxurl,e,function(){},"json")}),I(".wpa-ld button").then(s=>{t(".wpa-ld button").on("click",function(a){var e=t(this).attr("aria-expanded")==="true";if(e){var r=t(this).parent("div"),o=r.attr("class").replace("wpa-ld wp-image-",""),l={longdesc:o},n={action:wpa.action,security:wpa.security,stats:l,post_id:wpa.post_id,title:E,type:"event"};t.post(wpa.ajaxurl,n,function(c){console.log(c)},"json")}})}),t(".wpa-alt button").on("click",function(s){var a=t(this).attr("aria-expanded")==="true";if(a){var e=t(this).parent("div");console.log(e);var r=e.attr("class").replace("wpa-alt wp-image-",""),o={alttext:r},l={action:wpa.action,security:wpa.security,stats:o,post_id:wpa.post_id,title:E,type:"event"};t.post(wpa.ajaxurl,l,function(n){console.log(n)},"json")}}),wpa.tracking&&i.length>=1)){var L={action:wpa.action,security:wpa.security,stats:i,post_id:wpa.post_id,title:wpa.url,type:"view"};t.post(wpa.ajaxurl,L,function(s){console.log(s)},"json")}if(wpa.underline.enabled){var T=t(wpa.underline.target).css("outline-width"),N=t(wpa.underline.target).css("outline-offset"),M=t(wpa.underline.target).css("color"),z=t(wpa.underline.target).css("outline-color");t(wpa.underline.target).not("nav "+wpa.underline.target).css("text-decoration","underline"),t(wpa.underline.target).on("mouseenter",function(){t(this).css("text-decoration","none")}),t(wpa.underline.target).on("mouseleave",function(){t(this).css("text-decoration","underline")}),t(wpa.underline.target).on("focusin",function(){var s="2px";T=="2px"&&(s="4px"),t(this).css("outline-width",s),t(this).css("outline-color",M),t(this).css("outline-offset","2px")}),t(wpa.underline.target).on("focusout",function(){t(this).css("outline-width",T),t(this).css("outline-color",z),t(this).css("outline-offset",N)})}if(wpa.videos){let s=matchMedia("(prefers-reduced-motion)"),a="false",e=document.querySelectorAll("video[autoplay]:not([controls])");e.length>0&&e.forEach(r=>{s.matches&&(r.pause(),a="true");let o=r.parentElement,l=document.createElement("button"),n=document.createElement("span"),c=document.createElement("span");l.setAttribute("type","button"),l.classList.add("wpa-video"),l.setAttribute("aria-pressed",a),n.classList.add("dashicons-controls-pause","dashicons"),n.setAttribute("aria-hidden","true"),c.classList.add("screen-reader-text"),c.innerText=wpa.pause,l.append(n,c),o.append(l),l.addEventListener("click",function(){let d=this.getAttribute("aria-pressed");console.log(d),d==="true"?(r.play(),this.setAttribute("aria-pressed","false")):(r.pause(),this.setAttribute("aria-pressed","true"))})})}})(jQuery);function v(t){var p="";if(t.nodeType===3||t.nodeType===4)p=t.nodeValue;else if(t.nodeType===1&&(t.tagName.toLowerCase()=="img"||t.tagName.toLowerCase()=="area"||t.tagName.toLowerCase()=="input"&&t.getAttribute("type")&&t.getAttribute("type").toLowerCase()=="image"))p=t.getAttribute("alt")||"";else if(t.nodeType===1&&!t.tagName.match(/^(script|style)$/i))for(var i=t.childNodes,f=0,S=i.length;f<S;f++){var u=t.getAttribute("aria-label");p+=u||v(i[f])+" "}return p}function I(t){return new Promise(p=>{if(document.querySelector(t))return p(document.querySelector(t));let i=new MutationObserver(f=>{document.querySelector(t)&&(i.disconnect(),p(document.querySelector(t)))});i.observe(document.body,{childList:!0,subtree:!0})})}})();

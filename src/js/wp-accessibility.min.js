(()=>{(function(t){"use strict";var l=document.querySelector("html"),a=[];if(wpa.lang){var d=l.getAttribute("lang");d||(t("html").attr("lang",wpa.lang),(wpa.errors||wpa.tracking)&&(a.push("html-lang"),console.log("HTML language set by WP Accessibility")))}if(wpa.dir){var T=l.getAttribute("dir");T||(t("html").attr("dir",wpa.dir),(wpa.errors||wpa.tracking)&&(a.push("html-lang-direction"),console.log("HTML language direction set by WP Accessibility")))}var p=document.querySelector('meta[name="viewport"]');if(p){var g=p.getAttribute("content"),u=p.getAttribute("content");g.search(/user-scalable=no/g)&&(u=g.replace("user-scalable=no","user-scalable=yes"),p.setAttribute("content",u),(wpa.errors||wpa.tracking)&&u!=g&&(a.push("viewport-scalable"),console.log("Viewport made scalable by WP Accessibility"))),g.search(/maximum-scale=1/g)&&(u=g.replace("maximum-scale=1","maximum-scale=5"),u=u.replace("maximum-scale=0","maximum-scale=5"),p.setAttribute("content",u),(wpa.errors||wpa.tracking)&&u!=g&&(a.push("viewport-maxscale"),console.log("Viewport maximum scale set by WP Accessibility")))}if(wpa.skiplinks.enabled&&(t("body").prepend(wpa.skiplinks.output),(wpa.errors||wpa.tracking)&&(a.push("skiplinks"),console.log("Skip links added by WP Accessibility"))),wpa.current&&(t(function(){t(".current-menu-item a, .current_page_item a").attr("aria-current","page")}),(wpa.errors||wpa.tracking)&&(a.push("aria-current"),console.log("ARIA current added by WP Accessibility"))),wpa.labels){var S=["s","author","email","url","comment"];t.each(S,function(i,r){if(r=="comment")var e=t("textarea[name="+r+"]");else var e=t("input[name="+r+"]").not("#adminbar-search");if(e.length!==0){var n=e.attr("id"),o=t(e).parent("label"),c=t(e).attr("aria-label"),s=t(e).attr("aria-labelledby"),b={};s&&(b=t("#"+s));var W=!(c==""||typeof c>"u"),f=!(s==""||typeof s>"u");if(!W&&!f||!W&&f&&b.length===0)if(n){var w=t("label[for="+n+"]"),j=w.text();w.length&&!j&&(w.text(wpa.wpalabels[r]),(wpa.errors||wpa.tracking)&&(a.push(["empty-label",wpa.wpalabels[r]]),console.log("Empty label on "+wpa.wpalabels[r]+" added by WP Accessibility"))),!w.length&&!o.length&&(e.before("<label for='"+n+"' class='wpa-screen-reader-text'>"+wpa.wpalabels[r]+"</label>"),(wpa.errors||wpa.tracking)&&(a.push(["explicit-label",wpa.wpalabels[r]]),console.log("Explicit label on "+wpa.wpalabels[r]+" added by WP Accessibility")))}else o.length||(e.attr("id","wpa_label_"+r).before("<label for='wpa_label_"+r+"' class='wpa-screen-reader-text'>"+wpa.wpalabels[r]+"</label>"),(wpa.errors||wpa.tracking)&&(a.push(["implicit-label",wpa.wpalabels[r]]),console.log("Implicit label on "+wpa.wpalabels[r]+" added by WP Accessibility")))}})}if(wpa.titles){var m=0,h=0,y=0;let i=!1;document.querySelectorAll("img, a, input, textarea, select, button").forEach(e=>{var n=e.getAttribute("title");if(e.classList.contains("nturl")&&(i=!0),n&&n!=="")switch(e.tagName){case"IMG":var o=e.getAttribute("alt");(!o||o==="")&&e.setAttribute("alt",n),e.removeAttribute("title"),m++;break;case"A":case"BUTTON":var c=v(e);if(!c||c===""){var s=e.getAttribute("aria-label");(!s||s==="")&&(e.setAttribute("aria-label",n),i||e.removeAttribute("title"))}else e.removeAttribute("title");h++;break;case"INPUT":case"SELECT":case"TEXTAREA":var s=e.getAttribute("aria-label"),b=e.getAttribute("aria-labelledby"),W=b?document.getElementById(b):!1,f=e.getAttribute("id"),w=f?document.querySelector('label[for="'+f+'"]'):!1,j=e.closest("label"),V=!!(s&&s!==""),F=!!(w&&v(w)!==""),H=!!(j&&v(j)!==""),O=!!(W&&v(arialabeller)!=="");V||F||H||O||e.setAttribute("aria-label",n),e.removeAttribute("title"),y++;break}}),(wpa.errors||wpa.tracking)&&(m>0&&(a.push(["images-titles",m]),console.log(m+" title attributes removed from images by WP Accessibility")),h>0&&(a.push(["control-titles",h]),console.log(h+" title attributes removed from links and buttons by WP Accessibility")),y>0&&(a.push(["input-titles",y]),console.log(y+" title attributes removed from input fields by WP Accessibility")))}if(wpa.target){var q=t("a:not(.wpa-allow-target)"),x=0;q.each(function(){var i=t(this).attr("target");i&&(t(this).removeAttr("target"),x++)}),x>0&&(wpa.errors||wpa.tracking)&&(a.push(["link-targets",x]),console.log(x+" target attributes removed from links by WP Accessibility"))}if(wpa.tabindex){var N=t("input,a,select,textarea,button").not("a:not([href])"),A=0;N.each(function(){var i=t(this).attr("tabindex");i&&(t(this).removeAttr("tabindex"),A++)}),A>0&&(wpa.errors||wpa.tracking)&&(a.push(["control-tabindex",A]),console.log(A+" tabindex attributes removed from links, buttons and inputs by WP Accessibility"));var k=t('div[role="button"]').not("div[tabindex]"),P=t('a[role="button"]').not("a[tabindex],a[href]");k.attr("tabindex","0").addClass("wpa-focusable"),k.length>0&&(wpa.errors||wpa.tracking)&&(a.push(["button-add-tabindex",k.length]),console.log(k.length+" tabindex attributes added to divs with the button role by WP Accessibility")),P.attr("tabindex","0").addClass("wpa-focusable"),P.length>0&&(wpa.errors||wpa.tracking)&&(a.push(["link-add-tabindex",P.length]),console.log(P.length+" tabindex attributes added to anchor elements with the button role and no href value by WP Accessibility"))}var _=new Fingerprint().get();if(wpa.url!=="disabled"&&(t(".toggle-contrast").on("click",function(i){if(t(this).attr("id")=="is_normal_contrast")var r={contrast:"disabled"};else var r={contrast:"enabled"};var e={action:wpa.action,security:wpa.security,stats:r,post_id:wpa.post_id,title:_,type:"event"};t.post(wpa.ajaxurl,e,function(){},"json")}),t(".toggle-fontsize").on("click",function(i){if(t(this).attr("id")=="is_normal_fontsize")var r={fontsize:"disabled"};else var r={fontsize:"enabled"};var e={action:wpa.action,security:wpa.security,stats:r,post_id:wpa.post_id,title:_,type:"event"};t.post(wpa.ajaxurl,e,function(){},"json")}),U(".wpa-ld button").then(i=>{t(".wpa-ld button").on("click",function(r){var e=t(this).attr("aria-expanded")==="true";if(e){var n=t(this).parent("div"),o=n.attr("class").replace("wpa-ld wp-image-",""),c={longdesc:o},s={action:wpa.action,security:wpa.security,stats:c,post_id:wpa.post_id,title:_,type:"event"};t.post(wpa.ajaxurl,s,function(b){console.log(b)},"json")}})}),t(".wpa-alt button").on("click",function(i){var r=t(this).attr("aria-expanded")==="true";if(r){var e=t(this).parent("div");console.log(e);var n=e.attr("class").replace("wpa-alt wp-image-",""),o={alttext:n},c={action:wpa.action,security:wpa.security,stats:o,post_id:wpa.post_id,title:_,type:"event"};t.post(wpa.ajaxurl,c,function(s){console.log(s)},"json")}}),wpa.tracking&&a.length>=1)){var C={action:wpa.action,security:wpa.security,stats:a,post_id:wpa.post_id,title:wpa.url,type:"view"};t.post(wpa.ajaxurl,C,function(i){console.log(i)},"json")}if(wpa.underline.enabled){var E=t(wpa.underline.target).css("outline-width"),z=t(wpa.underline.target).css("outline-offset"),M=t(wpa.underline.target).css("color"),L=t(wpa.underline.target).css("outline-color");t(wpa.underline.target).not("nav "+wpa.underline.target).css("text-decoration","underline"),t(wpa.underline.target).on("mouseenter",function(){t(this).css("text-decoration","none")}),t(wpa.underline.target).on("mouseleave",function(){t(this).css("text-decoration","underline")}),t(wpa.underline.target).on("focusin",function(){var i="2px";E=="2px"&&(i="4px"),t(this).css("outline-width",i),t(this).css("outline-color",M),t(this).css("outline-offset","2px")}),t(wpa.underline.target).on("focusout",function(){t(this).css("outline-width",E),t(this).css("outline-color",L),t(this).css("outline-offset",z)})}})(jQuery);function v(t){var l="";if(t.nodeType===3||t.nodeType===4)l=t.nodeValue;else if(t.nodeType===1&&(t.tagName.toLowerCase()=="img"||t.tagName.toLowerCase()=="area"||t.tagName.toLowerCase()=="input"&&t.getAttribute("type")&&t.getAttribute("type").toLowerCase()=="image"))l=t.getAttribute("alt")||"";else if(t.nodeType===1&&!t.tagName.match(/^(script|style)$/i))for(var a=t.childNodes,d=0,T=a.length;d<T;d++){var p=t.getAttribute("aria-label");l+=p||v(a[d])+" "}return l}function U(t){return new Promise(l=>{if(document.querySelector(t))return l(document.querySelector(t));let a=new MutationObserver(d=>{document.querySelector(t)&&(a.disconnect(),l(document.querySelector(t)))});a.observe(document.body,{childList:!0,subtree:!0})})}})();

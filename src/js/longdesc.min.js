(()=>{(function(e){"use strict";if(longdesc.type==="link"){let p=function(a,t,n){var d=a.attr("alt"),l=document.body.className.split(/\s+/),r="";console.log(l),e.each(l,function(c,w){w.match(/postid-/gi)&&(r=w.replace("postid-","",w))});var s=new URL(n);s.searchParams.set("referrer",r),s.toString();var i=a.attr("class");a.wrap('<div class="wpa-ld" />'),a.parent(".wpa-ld").addClass(i),a.attr("alt","").attr("class",""),a.parent(".wpa-ld").append('<a href="'+s+'" class="longdesc-link">Description<span> of'+d+"</span></a>")},o=function(a){var t=a.attr("class").replace("wp-image-",""),n=wparest.url+"/"+t;e.get(n).done(function(d){var l={attachment:d},r=d.description.rendered;if(r=r.replace(/(<([^>]+)>)/gi,"").trim(),r!==""){var s=new URL(d.link);s.searchParams.set("longdesc",t),s.toString(),p(a,t,s)}}).fail(function(){alert("cannot load media")})};e("img[longdesc]").each(function(){var a=e(this).attr("longdesc"),t=e(this).attr("alt"),n=e(this).attr("class");e(this).wrap('<div class="wpa-ld" />'),e(this).parent(".wpa-ld").addClass(n),e(this).attr("alt","").attr("class",""),e(this).parent(".wpa-ld").append('<a href="'+a+'" class="longdesc-link">Description<span> of'+t+"</span></a>")}),e("figure.is-style-longdesc").each(function(){var a=e(this).find("img");o(a)})}else{let p=function(a,t,n,d){var l=a.attr("class");a.attr("class","").attr("longdesc",n),a.attr("id","longdesc-return-"+t),a.wrap('<div class="wpa-ld" />'),a.parent(".wpa-ld").addClass(l),a.parent(".wpa-ld").append('<button aria-expanded="false" class="wpa-toggle">'+wparest.text+"</button>"),a.parent(".wpa-ld").append('<div class="longdesc"></div>');var r=a.parent(".wpa-ld").children(".longdesc");r.hide(),r.load(n+" #desc_"+t,{limit:25},function(s,i,c){i==="error"&&r.html(d)}),a.parent(".wpa-ld").children("button").on("click",function(s){s.preventDefault();var i=r.is(":visible");i?(e(this).attr("aria-expanded","false"),r.hide()):(e(this).attr("aria-expanded","true"),r.show(150))})},o=function(a){var t=a.attr("class");t===""&&(t=a.parent(".wpa-alt").attr("class").replace("wpa-alt ",""));var n=t.replace("wp-image-",""),d=wparest.url+"/"+n;e.get(d).done(function(l){var r={attachment:l},s=l.description.rendered;if(s=s.replace(/(<([^>]+)>)/gi,"").trim(),s!==""){var i=new URL(l.link);i.searchParams.set("longdesc",n),i.toString(),p(a,n,i,s)}}).fail(function(){alert("cannot load media")})};e("img[longdesc]").each(function(){var a=e(this).attr("longdesc"),t=e(this),n=t.attr("class"),d=t.attr("class").match(/\S+/g),l="";if(e.each(d,function(i,c){c.match(/wp-image-/gi)&&(l=c)}),l===""){var r=t.attr("id");l=r.replace("longdesc-return-","")}t.attr("class",""),t.wrap('<div class="wpa-ld" />'),t.parent(".wpa-ld").addClass(n),t.parent(".wpa-ld").append('<button aria-expanded="false" class="wpa-toggle">'+wparest.text+"</button>"),t.parent(".wpa-ld").append('<div class="longdesc"></div>');var s=t.parent(".wpa-ld").children(".longdesc");s.hide(),s.load(a+" #desc_"+l),t.parent(".wpa-ld").children("button").on("click",function(i){i.preventDefault();var c=s.is(":visible");c?(e(this).attr("aria-expanded","false"),s.hide()):(e(this).attr("aria-expanded","true"),s.show(150))})}),e("figure.is-style-longdesc").each(function(){var a=e(this).find("img");o(a)})}})(jQuery);})();

(()=>{(function(t){"use strict";var o=document.querySelector("html"),a=[];if(wpa.lang){var b=o.getAttribute("lang");b||(t("html").attr("lang",wpa.lang),(wpa.errors||wpa.tracking)&&(a.push("html-lang"),console.log("HTML language set by WP Accessibility")))}if(wpa.dir){var _=o.getAttribute("dir");_||(t("html").attr("dir",wpa.dir),(wpa.errors||wpa.tracking)&&(a.push("html-lang-direction"),console.log("HTML language direction set by WP Accessibility")))}var s=document.querySelector('meta[name="viewport"]');if(s){var p=s.getAttribute("content"),n=s.getAttribute("content");p.search(/user-scalable=no/g)&&(n=p.replace("user-scalable=no","user-scalable=yes"),s.setAttribute("content",n),(wpa.errors||wpa.tracking)&&n!=p&&(a.push("viewport-scalable"),console.log("Viewport made scalable by WP Accessibility"))),p.search(/maximum-scale=1/g)&&(n=p.replace("maximum-scale=1","maximum-scale=5"),n=n.replace("maximum-scale=0","maximum-scale=5"),s.setAttribute("content",n),(wpa.errors||wpa.tracking)&&n!=p&&(a.push("viewport-maxscale"),console.log("Viewport maximum scale set by WP Accessibility")))}if(wpa.skiplinks.enabled&&(t("body").prepend(wpa.skiplinks.output),(wpa.errors||wpa.tracking)&&(a.push("skiplinks"),console.log("Skip links added by WP Accessibility"))),wpa.current&&(t(function(){t(".current-menu-item a, .current_page_item a").attr("aria-current","page")}),(wpa.errors||wpa.tracking)&&(a.push("aria-current"),console.log("ARIA current added by WP Accessibility"))),wpa.labels){var N=["s","author","email","url","comment"];t.each(N,function(i,e){if(e=="comment")var r=t("textarea[name="+e+"]");else var r=t("input[name="+e+"]").not("#adminbar-search");if(r.length!==0){var u=r.attr("id"),w=t(r).parent("label"),l=t(r).attr("aria-label"),c=t(r).attr("aria-labelledby"),P={};c&&(P=t("#"+c));var g=!(l==""||typeof l>"u"),d=!(c==""||typeof c>"u");if(!g&&!d||!g&&d&&P.length===0)if(u){var W=t("label[for="+u+"]");!W.length&&!w.length&&(r.before("<label for='"+u+"' class='wpa-screen-reader-text'>"+wpa.wpalabels[e]+"</label>"),(wpa.errors||wpa.tracking)&&(a.push(["explicit-label",wpa.wpalabels[e]]),console.log("Explicit label on "+wpa.wpalabels[e]+"added by WP Accessibility")))}else w.length||(r.attr("id","wpa_label_"+e).before("<label for='wpa_label_"+e+"' class='wpa-screen-reader-text'>"+wpa.wpalabels[e]+"</label>"),(wpa.errors||wpa.tracking)&&(a.push(["implicit-label",wpa.wpalabels[e]]),console.log("Implicit label on "+wpa.wpalabels[e]+"added by WP Accessibility")))}})}if(wpa.titles){var m=0,v=0,h=0;document.querySelectorAll("img, a, input, textarea, select, button").forEach(e=>{var r=e.getAttribute("title");if(r&&r!=="")switch(e.tagName){case"IMG":var u=e.getAttribute("alt");(!u||u==="")&&e.setAttribute("alt",r),e.removeAttribute("title"),m++;break;case"A":case"BUTTON":var w=f(e);if(!w||w===""){var l=e.getAttribute("aria-label");(!l||l==="")&&(e.setAttribute("aria-label",r),e.removeAttribute("title"))}else e.removeAttribute("title");v++;break;case"INPUT":case"SELECT":case"TEXTAREA":var l=e.getAttribute("aria-label"),c=e.getAttribute("aria-labelledby"),P=c?document.getElementById(c):!1,g=e.getAttribute("id"),d=g?document.querySelector('label[for="'+g+'"]'):!1,W=e.closest("label"),V=!!(l&&l!==""),H=!!(d&&f(d)!==""),U=!!(W&&f(W)!==""),F=!!(P&&f(arialabeller)!=="");V||H||U||F||e.setAttribute("aria-label",r),e.removeAttribute("title"),h++;break}}),(wpa.errors||wpa.tracking)&&(m>0&&(a.push(["images-titles",m]),console.log(m+" title attributes removed from images by WP Accessibility")),v>0&&(a.push(["control-titles",v]),console.log(v+" title attributes removed from links and buttons by WP Accessibility")),h>0&&(a.push(["input-titles",h]),console.log(h+" title attributes removed from input fields by WP Accessibility")))}if(wpa.target){var j=t("a:not(.wpa-allow-target)"),y=0;j.each(function(){var i=t(this).attr("target");i&&(t(this).removeAttr("target"),y++)}),y>0&&(wpa.errors||wpa.tracking)&&(a.push(["link-targets",y]),console.log(y+" target attributes removed from links by WP Accessibility"))}if(wpa.tabindex){var C=t("input,a,select,textarea,button").not("a:not([href])"),x=0;C.each(function(){var i=t(this).attr("tabindex");i&&(t(this).removeAttr("tabindex"),x++)}),x>0&&(wpa.errors||wpa.tracking)&&(a.push(["control-tabindex",x]),console.log(x+" tabindex attributes removed from links, buttons and inputs by WP Accessibility"));var A=t('div[role="button"]').not("div[tabindex]"),k=t('a[role="button"]').not("a[tabindex],a[href]");A.attr("tabindex","0").addClass("wpa-focusable"),A.length>0&&(wpa.errors||wpa.tracking)&&(a.push(["button-add-tabindex",A.length]),console.log(A.length+" tabindex attributes added to divs with the button role by WP Accessibility")),k.attr("tabindex","0").addClass("wpa-focusable"),k.length>0&&(wpa.errors||wpa.tracking)&&(a.push(["link-add-tabindex",k.length]),console.log(k.length+" tabindex attributes added to anchor elements with the button role and no href value by WP Accessibility"))}var T=new Fingerprint().get();if(t(".toggle-contrast").on("click",function(i){if(t(this).attr("id")=="is_normal_contrast")var e={contrast:"disabled"};else var e={contrast:"enabled"};var r={action:wpa.action,security:wpa.security,stats:e,post_id:wpa.post_id,title:T,type:"event"};t.post(wpa.ajaxurl,r,function(){},"json")}),t(".toggle-fontsize").on("click",function(i){if(t(this).attr("id")=="is_normal_fontsize")var e={fontsize:"disabled"};else var e={fontsize:"enabled"};var r={action:wpa.action,security:wpa.security,stats:e,post_id:wpa.post_id,title:T,type:"event"};t.post(wpa.ajaxurl,r,function(){},"json")}),wpa.tracking&&a.length>=1){var S={action:wpa.action,security:wpa.security,stats:a,post_id:wpa.post_id,title:wpa.url,type:"view"};t.post(wpa.ajaxurl,S,function(i){console.log(i)},"json")}if(wpa.underline.enabled){var E=t(wpa.underline.target).css("outline-width"),q=t(wpa.underline.target).css("outline-offset"),z=t(wpa.underline.target).css("color"),M=t(wpa.underline.target).css("outline-color");t(wpa.underline.target).not("nav "+wpa.underline.target).css("text-decoration","underline"),t(wpa.underline.target).on("mouseenter",function(){t(this).css("text-decoration","none")}),t(wpa.underline.target).on("mouseleave",function(){t(this).css("text-decoration","underline")}),t(wpa.underline.target).on("focusin",function(){var i="2px";E=="2px"&&(i="4px"),t(this).css("outline-width",i),t(this).css("outline-color",z),t(this).css("outline-offset","2px")}),t(wpa.underline.target).on("focusout",function(){t(this).css("outline-width",E),t(this).css("outline-color",M),t(this).css("outline-offset",q)})}})(jQuery);function f(t){var o="";if(t.nodeType===3||t.nodeType===4)o=t.nodeValue;else if(t.nodeType===1&&(t.tagName.toLowerCase()=="img"||t.tagName.toLowerCase()=="area"||t.tagName.toLowerCase()=="input"&&t.getAttribute("type")&&t.getAttribute("type").toLowerCase()=="image"))o=t.getAttribute("alt")||"";else if(t.nodeType===1&&!t.tagName.match(/^(script|style)$/i))for(var a=t.childNodes,b=0,_=a.length;b<_;b++){var s=t.getAttribute("aria-label");o+=s||f(a[b])+" "}return o}})();
